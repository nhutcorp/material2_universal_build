{"version":3,"file":"icon.js","sources":["../../../src/lib/icon/index.ts","../../../src/lib/icon/icon-module.ts","../../../src/lib/icon/icon.ts","../../../src/lib/icon/icon-registry.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {MdIconModule,MdIconBase,_MdIconMixinBase,MdIcon,getMdIconNameNotFoundError,getMdIconNoHttpProviderError,getMdIconFailedToSanitizeError,MdIconRegistry,ICON_REGISTRY_PROVIDER_FACTORY,ICON_REGISTRY_PROVIDER,MatIcon,MatIconBase,MatIconModule,MatIconRegistry} from './public_api';\n","/**\r\n * @license\r\n * Copyright Google Inc. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n\nimport {NgModule} from '@angular/core';\r\nimport {MdCommonModule} from '@angular/material/core';\r\nimport {MdIcon} from './icon';\r\nimport {ICON_REGISTRY_PROVIDER} from './icon-registry';\nexport class MdIconModule {static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\r\n  imports: [MdCommonModule],\r\n  exports: [MdIcon, MdCommonModule],\r\n  declarations: [MdIcon],\r\n  providers: [ICON_REGISTRY_PROVIDER],\r\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction MdIconModule_tsickle_Closure_declarations() {\n/** @type {?} */\nMdIconModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMdIconModule.ctorParameters;\n}\n\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\r\n * @license\r\n * Copyright Google Inc. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n\nimport {first} from '@angular/cdk/rxjs';\r\nimport {\r\n  Attribute,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  ElementRef,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Renderer2,\r\n  SimpleChanges,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport {CanColor, mixinColor} from '@angular/material/core';\r\nimport {MdIconRegistry} from './icon-registry';\n/**\n * \\@docs-private\n */\nexport class MdIconBase {\n/**\n * @param {?} _renderer\n * @param {?} _elementRef\n */\nconstructor(public _renderer: Renderer2,\npublic _elementRef: ElementRef) {}\r\n}\n\nfunction MdIconBase_tsickle_Closure_declarations() {\n/** @type {?} */\nMdIconBase.prototype._renderer;\n/** @type {?} */\nMdIconBase.prototype._elementRef;\n}\n\r\nexport const /** @type {?} */ _MdIconMixinBase = mixinColor(MdIconBase);\n/**\n * Component to display an icon. It can be used in the following ways:\r\r- Specify the svgIcon input to load an SVG icon from a URL previously registered with the\r  addSvgIcon, addSvgIconInNamespace, addSvgIconSet, or addSvgIconSetInNamespace methods of\r  MdIconRegistry. If the svgIcon value contains a colon it is assumed to be in the format\r  \"[namespace]:[name]\", if not the value will be the name of an icon in the default namespace.\r  Examples:\r    <md-icon svgIcon=\"left-arrow\"></md-icon>\r    <md-icon svgIcon=\"animals:cat\"></md-icon>\r\r- Use a font ligature as an icon by putting the ligature text in the content of the <md-icon>\r  component. By default the Material icons font is used as described at\r  http://google.github.io/material-design-icons/#icon-font-for-the-web. You can specify an\r  alternate font by setting the fontSet input to either the CSS class to apply to use the\r  desired font, or to an alias previously registered with MdIconRegistry.registerFontClassAlias.\r  Examples:\r    <md-icon>home</md-icon>\r    <md-icon fontSet=\"myfont\">sun</md-icon>\r\r- Specify a font glyph to be included via CSS rules by setting the fontSet input to specify the\r  font, and the fontIcon input to specify the icon. Typically the fontIcon will specify a\r  CSS class which causes the glyph to be displayed via a :before selector, as in\r  https://fortawesome.github.io/Font-Awesome/examples/\r  Example:\r    <md-icon fontSet=\"fa\" fontIcon=\"alarm\"></md-icon>\n */\nexport class MdIcon extends _MdIconMixinBase implements OnChanges, OnInit, CanColor {\n/**\n * Name of the icon in the SVG icon set.\n */\nsvgIcon: string;\n/**\n * Font set that the icon is a part of.\n */\nfontSet: string;\n/**\n * Name of an icon within a font set.\n */\nfontIcon: string;\nprivate _previousFontSetClass: string;\nprivate _previousFontIconClass: string;\n/**\n * @param {?} renderer\n * @param {?} elementRef\n * @param {?} _mdIconRegistry\n * @param {?} ariaHidden\n */\nconstructor(\r\n      renderer: Renderer2,\r\n      elementRef: ElementRef,\nprivate _mdIconRegistry: MdIconRegistry,\r\n       ariaHidden: string) {\r\n    super(renderer, elementRef);\r\n\r\n    // If the user has not explicitly set aria-hidden, mark the icon as hidden, as this is\r\n    // the right thing to do for the majority of icon use-cases.\r\n    if (!ariaHidden) {\r\n      renderer.setAttribute(elementRef.nativeElement, 'aria-hidden', 'true');\r\n    }\r\n  }\n/**\n * Splits an svgIcon binding value into its icon set and icon name components.\rReturns a 2-element array of [(icon set), (icon name)].\rThe separator for the two fields is ':'. If there is no separator, an empty\rstring is returned for the icon set and the entire value is returned for\rthe icon name. If the argument is falsy, returns an array of two empty strings.\rThrows an error if the name contains two or more ':' separators.\rExamples:\r  'social:cake' -> ['social', 'cake']\r  'penguin' -> ['', 'penguin']\r  null -> ['', '']\r  'a:b:c' -> (throws Error)\n * @param {?} iconName\n * @return {?}\n */\nprivate _splitIconName(iconName: string): [string, string] {\r\n    if (!iconName) {\r\n      return ['', ''];\r\n    }\r\n    const /** @type {?} */ parts = iconName.split(':');\r\n    switch (parts.length) {\r\n      case 1: return ['', parts[0]]; // Use default namespace.\r\n      case 2: return /** @type {?} */(( <[string, string]>parts));\r\n      default: throw Error(`Invalid icon name: \"${iconName}\"`);\r\n    }\r\n  }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\r\n    // Only update the inline SVG icon if the inputs changed, to avoid unnecessary DOM operations.\r\n    if (changes.svgIcon) {\r\n      if (this.svgIcon) {\r\n        const [namespace, iconName] = this._splitIconName(this.svgIcon);\r\n\r\n        first.call(this._mdIconRegistry.getNamedSvgIcon(iconName, namespace)).subscribe(\r\n            svg => this._setSvgElement(svg),\r\n            (err: Error) => console.log(`Error retrieving icon: ${err.message}`));\r\n      } else {\r\n        this._clearSvgElement();\r\n      }\r\n    }\r\n\r\n    if (this._usingFontIcon()) {\r\n      this._updateFontIconClasses();\r\n    }\r\n  }\n/**\n * @return {?}\n */\nngOnInit() {\r\n    // Update font classes because ngOnChanges won't be called if none of the inputs are present,\r\n    // e.g. <md-icon>arrow</md-icon>. In this case we need to add a CSS class for the default font.\r\n    if (this._usingFontIcon()) {\r\n      this._updateFontIconClasses();\r\n    }\r\n  }\n/**\n * @return {?}\n */\nprivate _usingFontIcon(): boolean {\r\n    return !this.svgIcon;\r\n  }\n/**\n * @param {?} svg\n * @return {?}\n */\nprivate _setSvgElement(svg: SVGElement) {\r\n    this._clearSvgElement();\r\n    this._renderer.appendChild(this._elementRef.nativeElement, svg);\r\n  }\n/**\n * @return {?}\n */\nprivate _clearSvgElement() {\r\n    const /** @type {?} */ layoutElement = this._elementRef.nativeElement;\r\n    const /** @type {?} */ childCount = layoutElement.childNodes.length;\r\n\r\n    // Remove existing child nodes and add the new SVG element. Note that we can't\r\n    // use innerHTML, because IE will throw if the element has a data binding.\r\n    for (let /** @type {?} */ i = 0; i < childCount; i++) {\r\n      this._renderer.removeChild(layoutElement, layoutElement.childNodes[i]);\r\n    }\r\n  }\n/**\n * @return {?}\n */\nprivate _updateFontIconClasses() {\r\n    if (!this._usingFontIcon()) {\r\n      return;\r\n    }\r\n\r\n    const /** @type {?} */ elem = this._elementRef.nativeElement;\r\n    const /** @type {?} */ fontSetClass = this.fontSet ?\r\n        this._mdIconRegistry.classNameForFontAlias(this.fontSet) :\r\n        this._mdIconRegistry.getDefaultFontSetClass();\r\n\r\n    if (fontSetClass != this._previousFontSetClass) {\r\n      if (this._previousFontSetClass) {\r\n        this._renderer.removeClass(elem, this._previousFontSetClass);\r\n      }\r\n      if (fontSetClass) {\r\n        this._renderer.addClass(elem, fontSetClass);\r\n      }\r\n      this._previousFontSetClass = fontSetClass;\r\n    }\r\n\r\n    if (this.fontIcon != this._previousFontIconClass) {\r\n      if (this._previousFontIconClass) {\r\n        this._renderer.removeClass(elem, this._previousFontIconClass);\r\n      }\r\n      if (this.fontIcon) {\r\n        this._renderer.addClass(elem, this.fontIcon);\r\n      }\r\n      this._previousFontIconClass = this.fontIcon;\r\n    }\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  moduleId: module.id,\r\n  template: '<ng-content></ng-content>',\r\n  selector: 'md-icon, mat-icon',\r\n  styleUrls: ['icon.css'],\r\n  inputs: ['color'],\r\n  host: {\r\n    'role': 'img',\r\n    'class': 'mat-icon',\r\n  },\r\n  encapsulation: ViewEncapsulation.None,\r\n  preserveWhitespaces: false,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n{type: ElementRef, },\n{type: MdIconRegistry, },\n{type: undefined, decorators: [{ type: Attribute, args: ['aria-hidden', ] }, ]},\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'svgIcon': [{ type: Input },],\n'fontSet': [{ type: Input },],\n'fontIcon': [{ type: Input },],\n};\n}\n\nfunction MdIcon_tsickle_Closure_declarations() {\n/** @type {?} */\nMdIcon.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMdIcon.ctorParameters;\n/** @type {?} */\nMdIcon.propDecorators;\n/**\n * Name of the icon in the SVG icon set.\n * @type {?}\n */\nMdIcon.prototype.svgIcon;\n/**\n * Font set that the icon is a part of.\n * @type {?}\n */\nMdIcon.prototype.fontSet;\n/**\n * Name of an icon within a font set.\n * @type {?}\n */\nMdIcon.prototype.fontIcon;\n/** @type {?} */\nMdIcon.prototype._previousFontSetClass;\n/** @type {?} */\nMdIcon.prototype._previousFontIconClass;\n/** @type {?} */\nMdIcon.prototype._mdIconRegistry;\n}\n\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","/**\r\n * @license\r\n * Copyright Google Inc. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n\nimport {catchOperator, doOperator, finallyOperator, map, RxChain, share} from '@angular/cdk/rxjs';\r\nimport {Injectable, Optional, SecurityContext, SkipSelf} from '@angular/core';\r\nimport {Http} from '@angular/http';\r\nimport {DomSanitizer, SafeResourceUrl} from '@angular/platform-browser';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {forkJoin} from 'rxjs/observable/forkJoin';\r\nimport {of as observableOf} from 'rxjs/observable/of';\r\nimport {_throw as observableThrow} from 'rxjs/observable/throw';\n/**\n * Returns an exception to be thrown in the case when attempting to\rload an icon with a name that cannot be found.\r\\@docs-private\n * @param {?} iconName\n * @return {?}\n */\nexport function getMdIconNameNotFoundError(iconName: string): Error {\r\n  return Error(`Unable to find icon with the name \"${iconName}\"`);\r\n}\n/**\n * Returns an exception to be thrown when the consumer attempts to use\r`<md-icon>` without including \\@angular/http.\r\\@docs-private\n * @return {?}\n */\nexport function getMdIconNoHttpProviderError(): Error {\r\n  return Error('Could not find Http provider for use with Angular Material icons. ' +\r\n               'Please include the HttpModule from @angular/http in your app imports.');\r\n}\n/**\n * Returns an exception to be thrown when a URL couldn't be sanitized.\r\\@param url URL that was attempted to be sanitized.\r\\@docs-private\n * @param {?} url\n * @return {?}\n */\nexport function getMdIconFailedToSanitizeError(url: SafeResourceUrl): Error {\r\n  return Error(`The URL provided to MdIconRegistry was not trusted as a resource URL ` +\r\n               `via Angular's DomSanitizer. Attempted URL was \"${url}\".`);\r\n}\n/**\n * Configuration for an icon, including the URL and possibly the cached SVG element.\r\\@docs-private\n */\nclass SvgIconConfig {\r\n  svgElement: SVGElement | null = null;\n/**\n * @param {?} url\n */\nconstructor(public url: SafeResourceUrl) { }\r\n}\n\nfunction SvgIconConfig_tsickle_Closure_declarations() {\n/** @type {?} */\nSvgIconConfig.prototype.svgElement;\n/** @type {?} */\nSvgIconConfig.prototype.url;\n}\n\n/**\n * Service to register and display icons used by the <md-icon> component.\r- Registers icon URLs by namespace and name.\r- Registers icon set URLs by namespace.\r- Registers aliases for CSS classes, for use with icon fonts.\r- Loads icons from URLs and extracts individual icons from icon sets.\n */\nexport class MdIconRegistry {\n/**\n * URLs and cached SVG elements for individual icons. Keys are of the format \"[namespace]:[icon]\".\n */\nprivate _svgIconConfigs = new Map<string, SvgIconConfig>();\n/**\n * SvgIconConfig objects and cached SVG elements for icon sets, keyed by namespace.\rMultiple icon sets can be registered under the same namespace.\n */\nprivate _iconSetConfigs = new Map<string, SvgIconConfig[]>();\n/**\n * Cache for icons loaded by direct URLs.\n */\nprivate _cachedIconsByUrl = new Map<string, SVGElement>();\n/**\n * In-progress icon fetches. Used to coalesce multiple requests to the same URL.\n */\nprivate _inProgressUrlFetches = new Map<string, Observable<string>>();\n/**\n * Map from font identifiers to their CSS class names. Used for icon fonts.\n */\nprivate _fontCssClassesByAlias = new Map<string, string>();\n/**\n * The CSS class to apply when an <md-icon> component has no icon name, url, or font specified.\rThe default 'material-icons' value assumes that the material icon font has been loaded as\rdescribed at http://google.github.io/material-design-icons/#icon-font-for-the-web\n */\nprivate _defaultFontSetClass = 'material-icons';\n/**\n * @param {?} _http\n * @param {?} _sanitizer\n */\nconstructor(\nprivate _http: Http,\nprivate _sanitizer: DomSanitizer) {}\n/**\n * Registers an icon by URL in the default namespace.\r\\@param iconName Name under which the icon should be registered.\r\\@param url\n * @param {?} iconName\n * @param {?} url\n * @return {?}\n */\naddSvgIcon(iconName: string, url: SafeResourceUrl): this {\r\n    return this.addSvgIconInNamespace('', iconName, url);\r\n  }\n/**\n * Registers an icon by URL in the specified namespace.\r\\@param namespace Namespace in which the icon should be registered.\r\\@param iconName Name under which the icon should be registered.\r\\@param url\n * @param {?} namespace\n * @param {?} iconName\n * @param {?} url\n * @return {?}\n */\naddSvgIconInNamespace(namespace: string, iconName: string, url: SafeResourceUrl): this {\r\n    const /** @type {?} */ key = iconKey(namespace, iconName);\r\n    this._svgIconConfigs.set(key, new SvgIconConfig(url));\r\n    return this;\r\n  }\n/**\n * Registers an icon set by URL in the default namespace.\r\\@param url\n * @param {?} url\n * @return {?}\n */\naddSvgIconSet(url: SafeResourceUrl): this {\r\n    return this.addSvgIconSetInNamespace('', url);\r\n  }\n/**\n * Registers an icon set by URL in the specified namespace.\r\\@param namespace Namespace in which to register the icon set.\r\\@param url\n * @param {?} namespace\n * @param {?} url\n * @return {?}\n */\naddSvgIconSetInNamespace(namespace: string, url: SafeResourceUrl): this {\r\n    const /** @type {?} */ config = new SvgIconConfig(url);\r\n    const /** @type {?} */ configNamespace = this._iconSetConfigs.get(namespace);\r\n\r\n    if (configNamespace) {\r\n      configNamespace.push(config);\r\n    } else {\r\n      this._iconSetConfigs.set(namespace, [config]);\r\n    }\r\n    return this;\r\n  }\n/**\n * Defines an alias for a CSS class name to be used for icon fonts. Creating an mdIcon\rcomponent with the alias as the fontSet input will cause the class name to be applied\rto the <md-icon> element.\r\r\\@param alias Alias for the font.\r\\@param className Class name override to be used instead of the alias.\n * @param {?} alias\n * @param {?=} className\n * @return {?}\n */\nregisterFontClassAlias(alias: string, className = alias): this {\r\n    this._fontCssClassesByAlias.set(alias, className);\r\n    return this;\r\n  }\n/**\n * Returns the CSS class name associated with the alias by a previous call to\rregisterFontClassAlias. If no CSS class has been associated, returns the alias unmodified.\n * @param {?} alias\n * @return {?}\n */\nclassNameForFontAlias(alias: string): string {\r\n    return this._fontCssClassesByAlias.get(alias) || alias;\r\n  }\n/**\n * Sets the CSS class name to be used for icon fonts when an <md-icon> component does not\rhave a fontSet input value, and is not loading an icon by name or URL.\r\r\\@param className\n * @param {?} className\n * @return {?}\n */\nsetDefaultFontSetClass(className: string): this {\r\n    this._defaultFontSetClass = className;\r\n    return this;\r\n  }\n/**\n * Returns the CSS class name to be used for icon fonts when an <md-icon> component does not\rhave a fontSet input value, and is not loading an icon by name or URL.\n * @return {?}\n */\ngetDefaultFontSetClass(): string {\r\n    return this._defaultFontSetClass;\r\n  }\n/**\n * Returns an Observable that produces the icon (as an <svg> DOM element) from the given URL.\rThe response from the URL may be cached so this will not always cause an HTTP request, but\rthe produced element will always be a new copy of the originally fetched icon. (That is,\rit will not contain any modifications made to elements previously returned).\r\r\\@param safeUrl URL from which to fetch the SVG icon.\n * @param {?} safeUrl\n * @return {?}\n */\ngetSvgIconFromUrl(safeUrl: SafeResourceUrl): Observable<SVGElement> {\r\n    let /** @type {?} */ url = this._sanitizer.sanitize(SecurityContext.RESOURCE_URL, safeUrl);\r\n\r\n    if (!url) {\r\n      throw getMdIconFailedToSanitizeError(safeUrl);\r\n    }\r\n\r\n    let /** @type {?} */ cachedIcon = this._cachedIconsByUrl.get(url);\r\n\r\n    if (cachedIcon) {\r\n      return observableOf(cloneSvg(cachedIcon));\r\n    }\r\n\r\n    return RxChain.from(this._loadSvgIconFromConfig(new SvgIconConfig(url)))\r\n      .call(doOperator, svg => this._cachedIconsByUrl.set( /** @type {?} */((url)), svg))\r\n      .call(map, svg => cloneSvg(svg))\r\n      .result();\r\n  }\n/**\n * Returns an Observable that produces the icon (as an <svg> DOM element) with the given name\rand namespace. The icon must have been previously registered with addIcon or addIconSet;\rif not, the Observable will throw an error.\r\r\\@param name Name of the icon to be retrieved.\r\\@param namespace Namespace in which to look for the icon.\n * @param {?} name\n * @param {?=} namespace\n * @return {?}\n */\ngetNamedSvgIcon(name: string, namespace = ''): Observable<SVGElement> {\r\n    // Return (copy of) cached icon if possible.\r\n    const /** @type {?} */ key = iconKey(namespace, name);\r\n    const /** @type {?} */ config = this._svgIconConfigs.get(key);\r\n\r\n    if (config) {\r\n      return this._getSvgFromConfig(config);\r\n    }\r\n\r\n    // See if we have any icon sets registered for the namespace.\r\n    const /** @type {?} */ iconSetConfigs = this._iconSetConfigs.get(namespace);\r\n\r\n    if (iconSetConfigs) {\r\n      return this._getSvgFromIconSetConfigs(name, iconSetConfigs);\r\n    }\r\n\r\n    return observableThrow(getMdIconNameNotFoundError(key));\r\n  }\n/**\n * Returns the cached icon for a SvgIconConfig if available, or fetches it from its URL if not.\n * @param {?} config\n * @return {?}\n */\nprivate _getSvgFromConfig(config: SvgIconConfig): Observable<SVGElement> {\r\n    if (config.svgElement) {\r\n      // We already have the SVG element for this icon, return a copy.\r\n      return observableOf(cloneSvg(config.svgElement));\r\n    } else {\r\n      // Fetch the icon from the config's URL, cache it, and return a copy.\r\n      return RxChain.from(this._loadSvgIconFromConfig(config))\r\n          .call(doOperator, svg => config.svgElement = svg)\r\n          .call(map, svg => cloneSvg(svg))\r\n          .result();\r\n    }\r\n  }\n/**\n * Attempts to find an icon with the specified name in any of the SVG icon sets.\rFirst searches the available cached icons for a nested element with a matching name, and\rif found copies the element to a new <svg> element. If not found, fetches all icon sets\rthat have not been cached, and searches again after all fetches are completed.\rThe returned Observable produces the SVG element if possible, and throws\ran error if no icon with the specified name can be found.\n * @param {?} name\n * @param {?} iconSetConfigs\n * @return {?}\n */\nprivate _getSvgFromIconSetConfigs(name: string, iconSetConfigs: SvgIconConfig[]):\r\n      Observable<SVGElement> {\r\n    // For all the icon set SVG elements we've fetched, see if any contain an icon with the\r\n    // requested name.\r\n    const /** @type {?} */ namedIcon = this._extractIconWithNameFromAnySet(name, iconSetConfigs);\r\n\r\n    if (namedIcon) {\r\n      // We could cache namedIcon in _svgIconConfigs, but since we have to make a copy every\r\n      // time anyway, there's probably not much advantage compared to just always extracting\r\n      // it from the icon set.\r\n      return observableOf(namedIcon);\r\n    }\r\n\r\n    // Not found in any cached icon sets. If there are icon sets with URLs that we haven't\r\n    // fetched, fetch them now and look for iconName in the results.\r\n    const /** @type {?} */ iconSetFetchRequests: Observable<SVGElement | null>[] = iconSetConfigs\r\n      .filter(iconSetConfig => !iconSetConfig.svgElement)\r\n      .map(iconSetConfig => {\r\n        return RxChain.from(this._loadSvgIconSetFromConfig(iconSetConfig))\r\n          .call(catchOperator, (err: any): Observable<SVGElement | null> => {\r\n            let /** @type {?} */ url = this._sanitizer.sanitize(SecurityContext.RESOURCE_URL, iconSetConfig.url);\r\n\r\n            // Swallow errors fetching individual URLs so the combined Observable won't\r\n            // necessarily fail.\r\n            console.log(`Loading icon set URL: ${url} failed: ${err}`);\r\n            return observableOf(null);\r\n          })\r\n          .call(doOperator, svg => {\r\n            // Cache the SVG element.\r\n            if (svg) {\r\n              iconSetConfig.svgElement = svg;\r\n            }\r\n          })\r\n          .result();\r\n      });\r\n\r\n    // Fetch all the icon set URLs. When the requests complete, every IconSet should have a\r\n    // cached SVG element (unless the request failed), and we can check again for the icon.\r\n    return map.call(forkJoin.call(Observable, iconSetFetchRequests), () => {\r\n      const /** @type {?} */ foundIcon = this._extractIconWithNameFromAnySet(name, iconSetConfigs);\r\n\r\n      if (!foundIcon) {\r\n        throw getMdIconNameNotFoundError(name);\r\n      }\r\n\r\n      return foundIcon;\r\n    });\r\n  }\n/**\n * Searches the cached SVG elements for the given icon sets for a nested icon element whose \"id\"\rtag matches the specified name. If found, copies the nested element to a new SVG element and\rreturns it. Returns null if no matching element is found.\n * @param {?} iconName\n * @param {?} iconSetConfigs\n * @return {?}\n */\nprivate _extractIconWithNameFromAnySet(iconName: string, iconSetConfigs: SvgIconConfig[]):\r\n      SVGElement | null {\r\n    // Iterate backwards, so icon sets added later have precedence.\r\n    for (let /** @type {?} */ i = iconSetConfigs.length - 1; i >= 0; i--) {\r\n      const /** @type {?} */ config = iconSetConfigs[i];\r\n      if (config.svgElement) {\r\n        const /** @type {?} */ foundIcon = this._extractSvgIconFromSet(config.svgElement, iconName);\r\n        if (foundIcon) {\r\n          return foundIcon;\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\n/**\n * Loads the content of the icon URL specified in the SvgIconConfig and creates an SVG element\rfrom it.\n * @param {?} config\n * @return {?}\n */\nprivate _loadSvgIconFromConfig(config: SvgIconConfig): Observable<SVGElement> {\r\n    return map.call(this._fetchUrl(config.url),\r\n        svgText => this._createSvgElementForSingleIcon(svgText));\r\n  }\n/**\n * Loads the content of the icon set URL specified in the SvgIconConfig and creates an SVG element\rfrom it.\n * @param {?} config\n * @return {?}\n */\nprivate _loadSvgIconSetFromConfig(config: SvgIconConfig): Observable<SVGElement> {\r\n      // TODO: Document that icons should only be loaded from trusted sources.\r\n    return map.call(this._fetchUrl(config.url),\r\n        svgText => this._svgElementFromString(svgText));\r\n  }\n/**\n * Creates a DOM element from the given SVG string, and adds default attributes.\n * @param {?} responseText\n * @return {?}\n */\nprivate _createSvgElementForSingleIcon(responseText: string): SVGElement {\r\n    const /** @type {?} */ svg = this._svgElementFromString(responseText);\r\n    this._setSvgAttributes(svg);\r\n    return svg;\r\n  }\n/**\n * Searches the cached element of the given SvgIconConfig for a nested icon element whose \"id\"\rtag matches the specified name. If found, copies the nested element to a new SVG element and\rreturns it. Returns null if no matching element is found.\n * @param {?} iconSet\n * @param {?} iconName\n * @return {?}\n */\nprivate _extractSvgIconFromSet(iconSet: SVGElement, iconName: string): SVGElement | null {\r\n    const /** @type {?} */ iconNode = iconSet.querySelector('#' + iconName);\r\n\r\n    if (!iconNode) {\r\n      return null;\r\n    }\r\n\r\n    // If the icon node is itself an <svg> node, clone and return it directly. If not, set it as\r\n    // the content of a new <svg> node.\r\n    if (iconNode.tagName.toLowerCase() === 'svg') {\r\n      return this._setSvgAttributes( /** @type {?} */((iconNode.cloneNode(true) as SVGElement)));\r\n    }\r\n\r\n    // If the node is a <symbol>, it won't be rendered so we have to convert it into <svg>. Note\r\n    // that the same could be achieved by referring to it via <use href=\"#id\">, however the <use>\r\n    // tag is problematic on Firefox, because it needs to include the current page path.\r\n    if (iconNode.nodeName.toLowerCase() === 'symbol') {\r\n      return this._setSvgAttributes(this._toSvgElement(iconNode));\r\n    }\r\n\r\n    // createElement('SVG') doesn't work as expected; the DOM ends up with\r\n    // the correct nodes, but the SVG content doesn't render. Instead we\r\n    // have to create an empty SVG node using innerHTML and append its content.\r\n    // Elements created using DOMParser.parseFromString have the same problem.\r\n    // http://stackoverflow.com/questions/23003278/svg-innerhtml-in-firefox-can-not-display\r\n    const /** @type {?} */ svg = this._svgElementFromString('<svg></svg>');\r\n    // Clone the node so we don't remove it from the parent icon set element.\r\n    svg.appendChild(iconNode.cloneNode(true));\r\n\r\n    return this._setSvgAttributes(svg);\r\n  }\n/**\n * Creates a DOM element from the given SVG string.\n * @param {?} str\n * @return {?}\n */\nprivate _svgElementFromString(str: string): SVGElement {\r\n    // TODO: Is there a better way than innerHTML? Renderer doesn't appear to have a method for\r\n    // creating an element from an HTML string.\r\n    const /** @type {?} */ div = document.createElement('DIV');\r\n    div.innerHTML = str;\r\n    const /** @type {?} */ svg = /** @type {?} */(( div.querySelector('svg') as SVGElement));\r\n    if (!svg) {\r\n      throw Error('<svg> tag not found');\r\n    }\r\n    return svg;\r\n  }\n/**\n * Converts an element into an SVG node by cloning all of its children.\n * @param {?} element\n * @return {?}\n */\nprivate _toSvgElement(element: Element): SVGElement {\r\n    let /** @type {?} */ svg = this._svgElementFromString('<svg></svg>');\r\n\r\n    for (let /** @type {?} */ i = 0; i < element.childNodes.length; i++) {\r\n      if (element.childNodes[i].nodeType === Node.ELEMENT_NODE) {\r\n        svg.appendChild(element.childNodes[i].cloneNode(true));\r\n      }\r\n    }\r\n\r\n    return svg;\r\n  }\n/**\n * Sets the default attributes for an SVG element to be used as an icon.\n * @param {?} svg\n * @return {?}\n */\nprivate _setSvgAttributes(svg: SVGElement): SVGElement {\r\n    if (!svg.getAttribute('xmlns')) {\r\n      svg.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\r\n    }\r\n    svg.setAttribute('fit', '');\r\n    svg.setAttribute('height', '100%');\r\n    svg.setAttribute('width', '100%');\r\n    svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');\r\n    svg.setAttribute('focusable', 'false'); // Disable IE11 default behavior to make SVGs focusable.\r\n    return svg;\r\n  }\n/**\n * Returns an Observable which produces the string contents of the given URL. Results may be\rcached, so future calls with the same URL may not cause another HTTP request.\n * @param {?} safeUrl\n * @return {?}\n */\nprivate _fetchUrl(safeUrl: SafeResourceUrl): Observable<string> {\r\n    if (!this._http) {\r\n      throw getMdIconNoHttpProviderError();\r\n    }\r\n\r\n    const /** @type {?} */ url = this._sanitizer.sanitize(SecurityContext.RESOURCE_URL, safeUrl);\r\n\r\n    if (!url) {\r\n      throw getMdIconFailedToSanitizeError(safeUrl);\r\n    }\r\n\r\n    // Store in-progress fetches to avoid sending a duplicate request for a URL when there is\r\n    // already a request in progress for that URL. It's necessary to call share() on the\r\n    // Observable returned by http.get() so that multiple subscribers don't cause multiple XHRs.\r\n    const /** @type {?} */ inProgressFetch = this._inProgressUrlFetches.get(url);\r\n\r\n    if (inProgressFetch) {\r\n      return inProgressFetch;\r\n    }\r\n\r\n    // TODO(jelbourn): for some reason, the `finally` operator \"loses\" the generic type on the\r\n    // Observable. Figure out why and fix it.\r\n    const /** @type {?} */ req = RxChain.from(this._http.get(url))\r\n      .call(map, response => response.text())\r\n      .call(finallyOperator, () => this._inProgressUrlFetches.delete(url))\r\n      .call(share)\r\n      .result();\r\n\r\n    this._inProgressUrlFetches.set(url, req);\r\n    return req;\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Http, decorators: [{ type: Optional }, ]},\n{type: DomSanitizer, },\n];\n}\n\nfunction MdIconRegistry_tsickle_Closure_declarations() {\n/** @type {?} */\nMdIconRegistry.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMdIconRegistry.ctorParameters;\n/**\n * URLs and cached SVG elements for individual icons. Keys are of the format \"[namespace]:[icon]\".\n * @type {?}\n */\nMdIconRegistry.prototype._svgIconConfigs;\n/**\n * SvgIconConfig objects and cached SVG elements for icon sets, keyed by namespace.\rMultiple icon sets can be registered under the same namespace.\n * @type {?}\n */\nMdIconRegistry.prototype._iconSetConfigs;\n/**\n * Cache for icons loaded by direct URLs.\n * @type {?}\n */\nMdIconRegistry.prototype._cachedIconsByUrl;\n/**\n * In-progress icon fetches. Used to coalesce multiple requests to the same URL.\n * @type {?}\n */\nMdIconRegistry.prototype._inProgressUrlFetches;\n/**\n * Map from font identifiers to their CSS class names. Used for icon fonts.\n * @type {?}\n */\nMdIconRegistry.prototype._fontCssClassesByAlias;\n/**\n * The CSS class to apply when an <md-icon> component has no icon name, url, or font specified.\rThe default 'material-icons' value assumes that the material icon font has been loaded as\rdescribed at http://google.github.io/material-design-icons/#icon-font-for-the-web\n * @type {?}\n */\nMdIconRegistry.prototype._defaultFontSetClass;\n/** @type {?} */\nMdIconRegistry.prototype._http;\n/** @type {?} */\nMdIconRegistry.prototype._sanitizer;\n}\n\n/**\n * \\@docs-private\n * @param {?} parentRegistry\n * @param {?} http\n * @param {?} sanitizer\n * @return {?}\n */\nexport function ICON_REGISTRY_PROVIDER_FACTORY(\r\n    parentRegistry: MdIconRegistry, http: Http, sanitizer: DomSanitizer) {\r\n  return parentRegistry || new MdIconRegistry(http, sanitizer);\r\n}\n/**\n * \\@docs-private\n */\nexport const ICON_REGISTRY_PROVIDER = {\r\n  // If there is already an MdIconRegistry available, use that. Otherwise, provide a new one.\r\n  provide: MdIconRegistry,\r\n  deps: [[new Optional(), new SkipSelf(), MdIconRegistry], [new Optional(), Http], DomSanitizer],\r\n  useFactory: ICON_REGISTRY_PROVIDER_FACTORY\r\n};\n/**\n * Clones an SVGElement while preserving type information.\n * @param {?} svg\n * @return {?}\n */\nfunction cloneSvg(svg: SVGElement): SVGElement {\r\n  return /** @type {?} */(( svg.cloneNode(true) as SVGElement));\r\n}\n/**\n * Returns the cache key to use for an icon namespace and name.\n * @param {?} namespace\n * @param {?} name\n * @return {?}\n */\nfunction iconKey(namespace: string, name: string) {\r\n  return namespace + ':' + name;\r\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":["observableOf","observableThrow"],"mappings":"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"}